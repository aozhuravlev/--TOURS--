# tours.batumi Instagram Automation

ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะฐั ัะธััะตะผะฐ ะณะตะฝะตัะฐัะธะธ ะธ ะฟัะฑะปะธะบะฐัะธะธ ะบะพะฝัะตะฝัะฐ ะดะปั Instagram-ะบะฐะฝะฐะปะฐ **tours.batumi**.

## ะะพะทะผะพะถะฝะพััะธ

- **Story Series** โ ัะตัะธั ะธะท 3-7 ัะฒัะทะฐะฝะฝัั ะธััะพัะธะน ะฝะฐ ะพะดะฝั ัะตะผั
- **9 ะฒะธะทัะฐะปัะฝัั ัััะตะบัะพะฒ** โ zoom in/out, ะฟะฐะฝะพัะฐะผั, ัััะตะบัั ะฟะพ ัะณะปะฐะผ (~20% ััะฐัะธะบะฐ)
- **ะฃะผะฝัะน ะฟะพะดะฑะพั ัะตะผ** โ 12 ะบะฐัะตะณะพัะธะน, 87+ ะฟะพะดัะตะผ ั ะทะฐัะธัะพะน ะพั ะฟะพะฒัะพัะพะฒ
- **ะะบััะฐะปัะฝัะต ัะฐะบัั** โ ะธะฝัะตะณัะฐัะธั ั Perplexity API ะดะปั ะฟะพะธัะบะฐ ะธะฝัะพัะผะฐัะธะธ
- **ะะธะฒัะต ัะตะบััั** โ DeepSeek API ั ะดะฒััััะฐะฟะฝะพะน ะณะตะฝะตัะฐัะธะตะน (ัะพะทะดะฐะฝะธะต + humanization)
- **ะะพะดะตัะฐัะธั** โ Telegram-ะฑะพั ั ะฟะพะบะฐะดัะพะฒัะผ ะฟัะพัะผะพััะพะผ (ัะพัะพ + ัะตะบัั ะดะปั ะบะฐะถะดะพะน ะธััะพัะธะธ)
- **ะัะปะพะถะตะฝะฝัะน ัะตะฝะดะตั** โ ะฒะธะดะตะพ ัะพะทะดะฐัััั ัะพะปัะบะพ ะฟะพัะปะต ะพะดะพะฑัะตะฝะธั ะผะพะดะตัะฐัะพัะพะผ
- **ะะปะฐะฝะธัะพะฒัะธะบ** โ ะฐะฒัะพะผะฐัะธัะตัะบะฐั ะณะตะฝะตัะฐัะธั ะธ ะฟัะฑะปะธะบะฐัะธั ะฟะพ ัะฐัะฟะธัะฐะฝะธั
- **Docker** โ ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั ะดะปั ะฟัะพััะพะณะพ ะดะตะฟะปะพั

## ะัััััะน ััะฐัั

### 1. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน

```bash
pip install -r requirements.txt
```

### 2. ะะฐัััะพะนะบะฐ

ะกะบะพะฟะธััะนัะต `.env.example` ะฒ `.env` ะธ ะทะฐะฟะพะปะฝะธัะต API ะบะปััะธ:

```bash
cp .env.example .env
```

ะะฑัะทะฐัะตะปัะฝัะต ะบะปััะธ:
- `PERPLEXITY_API_KEY` โ ะดะปั ะฟะพะธัะบะฐ ะฐะบััะฐะปัะฝะพะน ะธะฝัะพัะผะฐัะธะธ
- `DEEPSEEK_API_KEY` โ ะดะปั ะณะตะฝะตัะฐัะธะธ ัะตะบััะฐ

ะะฟัะธะพะฝะฐะปัะฝัะต (ะดะปั ะฟะพะปะฝะพะน ะฐะฒัะพะผะฐัะธะทะฐัะธะธ):
- `TELEGRAM_BOT_TOKEN` โ ัะพะบะตะฝ ะฑะพัะฐ ะดะปั ะผะพะดะตัะฐัะธะธ
- `TELEGRAM_MODERATOR_CHAT_ID` โ ID ัะฐัะฐ ะผะพะดะตัะฐัะพัะฐ
- `INSTAGRAM_*` โ ะบัะตะดั ะดะปั Instagram Graph API

### 3. ะะพะฑะฐะฒััะต ะผะตะดะธะฐ-ะบะพะฝัะตะฝั

```
media/
โโโ photos/           # ะคะพัะพ ะฟะพ ะบะฐัะตะณะพัะธัะผ
โ   โโโ ะะพัะฝะฐั ะะดะถะฐัะธั/
โ   โโโ ะััะธัะตะบัััะฐ/
โ   โโโ ะััะฝั/
โ   โโโ ...
โโโ music/            # ะััะทะธะฝัะบะธะต ะผะตะปะพะดะธะธ (15-30 ัะตะบ)
```

### 4. ะะฐะฟััะบ

```bash
# ะกะณะตะฝะตัะธัะพะฒะฐัั ัะตัะธั Stories (3-7 ะธััะพัะธะน)
python main.py generate --series

# ะกะณะตะฝะตัะธัะพะฒะฐัั ะธ ะพัะฟัะฐะฒะธัั ะฒ Telegram ะฝะฐ ะผะพะดะตัะฐัะธั
python main.py generate --series --send-telegram

# ะกะณะตะฝะตัะธัะพะฒะฐัั ะพะดะธะฝะพัะฝัั Story
python main.py generate

# ะกะณะตะฝะตัะธัะพะฒะฐัั Post
python main.py generate --post

# ะะตะท ัััะตะบัะพะฒ ะดะฒะธะถะตะฝะธั (ััะฐัะธัะฝะพะต ัะพัะพ)
python main.py generate --static

# ะะพะบะฐะทะฐัั ััะฐัะธััะธะบั
python main.py stats

# ะะฐะฟัััะธัั ะฟะพะปะฝัั ัะธััะตะผั (scheduler + Telegram bot)
python main.py run
```

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ  Topic Selector โโโโโโถโ  News Fetcher   โโโโโโถโ Text Generator  โ
โ   (topics.json) โ     โ  (Perplexity)   โ     โ   (DeepSeek)    โ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
                                                         โ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ              โ
โ  Media Manager  โโโโโโถโ Video Composer  โโโโโโโโโโโโโโโโ
โ  (photos/music) โ     โ    (FFmpeg)     โ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ Content History โโโโโโโ   Orchestrator  โโโโโโถโ  Telegram Bot   โ
โ  (anti-repeat)  โ     โ                 โ     โ  (moderation)   โ
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
                                โ
                                โผ
                        โโโโโโโโโโโโโโโโโโโ
                        โ    Publisher    โ
                        โ  (Instagram)    โ
                        โโโโโโโโโโโโโโโโโโโ
```

## Workflow

### Story Series (ะฝะพะฒัะน workflow)

1. **ะฃััะพ ะะตะฝั 1 (08:00-09:00):** ะกะธััะตะผะฐ ะณะตะฝะตัะธััะตั ัะตัะธั ะธะท 3-7 ะธััะพัะธะน
2. **ะ Telegram ะฟัะธัะพะดัั ะคะะขะ + ัะตะบัั** ะดะปั ะบะฐะถะดะพะน ะธััะพัะธะธ ั ะบะฝะพะฟะบะฐะผะธ:
   - โ OK โ ะพะดะพะฑัะธัั ะธััะพัะธั
   - โ๏ธ ะะทะผะตะฝะธัั โ ะพััะตะดะฐะบัะธัะพะฒะฐัั ัะตะบัั
   - โ ะฃะดะฐะปะธัั โ ะธัะบะปััะธัั ะธะท ัะตัะธะธ
3. **ะะพะดะตัะฐัะพั ัะฐะฑะพัะฐะตั ั ะบะฐะถะดะพะน ะธััะพัะธะตะน ะพัะดะตะปัะฝะพ**
4. **ะะฝะพะฟะบะฐ "๐น ะะฐะฒะตััะธัั ะผะพะดะตัะฐัะธั"** โ ะทะฐะฟััะบะฐะตั ัะตะฝะดะตั ะขะะะฌะะ ะพะดะพะฑัะตะฝะฝัั
5. **ะะธะดะตะพ ัะพะทะดะฐัััั ะฟะพัะปะต ะผะพะดะตัะฐัะธะธ** (ัะบะพะฝะพะผะธั ัะตััััะพะฒ)
6. **ะฃััะพ ะะตะฝั 2 (08:00-09:00):** ะัะฑะปะธะบะฐัะธั ะฒ Instagram

### ะัะตะธะผััะตััะฒะฐ ะฝะพะฒะพะณะพ workflow

- ะะพะดะตัะฐัะพั ะฒะธะดะธั ัะพัะพ + ัะตะบัั ะะ ัะตะฝะดะตัะฐ ะฒะธะดะตะพ
- ะะพะถะฝะพ ัะตะดะฐะบัะธัะพะฒะฐัั/ัะดะฐะปััั ะพัะดะตะปัะฝัะต ะธััะพัะธะธ
- ะะธะดะตะพ ัะตะฝะดะตััััั ัะพะปัะบะพ ะดะปั ะพะดะพะฑัะตะฝะฝะพะณะพ ะบะพะฝัะตะฝัะฐ
- ะญะบะพะฝะพะผะธั ะฒัะตะผะตะฝะธ ะธ ัะตััััะพะฒ

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
tours-batumi-bot/
โโโ main.py                 # ะขะพัะบะฐ ะฒัะพะดะฐ
โโโ .env                    # API ะบะปััะธ (ะฝะต ะฒ git!)
โโโ requirements.txt        # ะะฐะฒะธัะธะผะพััะธ
โ
โโโ config/
โ   โโโ settings.py         # ะะฐะณััะทะบะฐ ะบะพะฝัะธะณััะฐัะธะธ
โ   โโโ topics.json         # ะขะตะผั ะธ ะฟะพะดัะตะผั
โ
โโโ prompts/                # ะะตะดะฐะบัะธััะตะผัะต ะฟัะพะผัั
โ   โโโ story_generator.txt
โ   โโโ story_humanizer.txt
โ   โโโ post_generator.txt
โ   โโโ post_humanizer.txt
โ
โโโ src/
โ   โโโ orchestrator.py     # ะะปะฐะฒะฝัะน ะบะพะพัะดะธะฝะฐัะพั
โ   โโโ scheduler.py        # ะะปะฐะฝะธัะพะฒัะธะบ
โ   โโโ modules/
โ       โโโ topic_selector.py
โ       โโโ news_fetcher.py
โ       โโโ text_generator.py
โ       โโโ media_manager.py
โ       โโโ video_composer.py
โ       โโโ content_history.py
โ       โโโ telegram_bot.py
โ       โโโ publisher.py
โ
โโโ media/
โ   โโโ photos/             # ะคะพัะพ ะฟะพ ะบะฐัะตะณะพัะธัะผ
โ   โโโ music/              # ะัะทัะบะฐะปัะฝัะต ััะตะบะธ
โ
โโโ output/                 # ะกะณะตะฝะตัะธัะพะฒะฐะฝะฝัะต ะฒะธะดะตะพ
โโโ data/
โ   โโโ content_history.json
โโโ logs/
โโโ docs/
```

## ะะฐัััะพะนะบะฐ ะฟัะพะผัะพะฒ

ะัะพะผัั ััะฐะฝัััั ะฒ `prompts/*.txt` ะธ ะปะตะณะบะพ ัะตะดะฐะบัะธัััััั:

- `story_generator.txt` โ ะณะตะฝะตัะฐัะธั ัะตะบััะฐ ะดะปั Story (ะดะพ 100 ัะธะผะฒะพะปะพะฒ)
- `story_humanizer.txt` โ "ะพัะตะปะพะฒะตัะธะฒะฐะฝะธะต" ัะตะบััะฐ Story
- `post_generator.txt` โ ะณะตะฝะตัะฐัะธั ะฟะพััะฐ (500-800 ัะธะผะฒะพะปะพะฒ + ัะตััะตะณะธ)
- `post_humanizer.txt` โ "ะพัะตะปะพะฒะตัะธะฒะฐะฝะธะต" ะฟะพััะฐ

ะะตัะตะผะตะฝะฝัะต ะฒ ะฟัะพะผัะฐั:
- `{topic}` โ ะฝะฐะทะฒะฐะฝะธะต ะบะฐัะตะณะพัะธะธ
- `{subtopic}` โ ะฝะฐะทะฒะฐะฝะธะต ะฟะพะดัะตะผั
- `{facts}` โ ัะฐะบัั ะพั Perplexity
- `{raw_text}` โ ัะณะตะฝะตัะธัะพะฒะฐะฝะฝัะน ัะตะบัั (ะดะปั humanizer)

## Anti-Repeat ัะธััะตะผะฐ

ะกะธััะตะผะฐ ะฟัะตะดะพัะฒัะฐัะฐะตั ะฟะพะฒัะพัั:

| ะญะปะตะผะตะฝั | Cooldown |
|---------|----------|
| ะะพะดัะตะผะฐ | 7 ะดะฝะตะน |
| ะคะพัะพ | 30 ะดะฝะตะน |
| ะัะทัะบะฐ | 14 ะดะฝะตะน |

ะะฐัััะฐะธะฒะฐะตััั ะฒ `.env`:
```
SUBTOPIC_COOLDOWN_DAYS=7
PHOTO_COOLDOWN_DAYS=30
MUSIC_COOLDOWN_DAYS=14
```

## API

### Perplexity (ะฟะพะธัะบ ัะฐะบัะพะฒ)
- ะะพะดะตะปั: `sonar` (ั ะพะฝะปะฐะนะฝ-ะฟะพะธัะบะพะผ)
- ะัะฟะพะปัะทะพะฒะฐะฝะธะต: ~1-2 ะทะฐะฟัะพัะฐ ะฝะฐ ะณะตะฝะตัะฐัะธั

### DeepSeek (ะณะตะฝะตัะฐัะธั ัะตะบััะฐ)
- ะะพะดะตะปั: `deepseek-chat`
- ะัะฟะพะปัะทะพะฒะฐะฝะธะต: 2 ะทะฐะฟัะพัะฐ ะฝะฐ ะณะตะฝะตัะฐัะธั (raw + humanize)

## ะะธัะตะฝะทะธั

Private project for tours.batumi
